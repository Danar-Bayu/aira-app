import{u as G,a as K,r as O,c as u,o as J,l as U,j as N,t as m,i as l,d as n,N as z,S as x,m as H,f as F,F as Q,g as V,h as W,k as X}from"./index-MOF6v1YI.js";import{F as b,R as Y}from"./FormField-4em4oIY1.js";const Z=[{label:"Laki-laki",value:"MALE"},{label:"Perempuan",value:"FEMALE"}];var ee=m('<div class="bg-white rounded-lg shadow-md overflow-hidden max-w-2xl mx-auto"><div class="bg-blue-600 text-white px-6 py-4"><h1 class="text-2xl font-bold">Edit Data Pasien</h1><p class="text-blue-200 mt-1">No. RM: </p></div><form class="p-6 space-y-6"><div class=space-y-2><label class="block text-sm font-medium text-gray-700">Jenis Kelamin</label><div class="flex gap-4"></div></div><div class="flex flex-wrap gap-3 pt-4 border-t border-gray-200"><button type=submit class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"></button><button type=button class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md transition-colors">Kembali'),te=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"><div class="bg-white rounded-lg p-6 max-w-md w-full animate-fade-in"><div class=text-center><div class="text-green-500 text-4xl mb-4">âœ“</div><h3 class="text-lg font-semibold mb-2">Data Berhasil Diperbarui!</h3><p class=text-gray-600>Anda akan diarahkan kembali dalam 2 detik'),ae=m('<div><div class="flex flex-col min-h-screen"><main class="flex-grow container mx-auto px-4 py-8">'),re=m('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500">'),le=m('<div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6">');function oe(){const[I,ne]=G(W),y=K(),g=O(),[i,$]=u({name:"",parent:"",gender:"MALE",dob:"",telp:"",address:"",numberRM:""}),[c,w]=u({}),[_,h]=u(""),[L,M]=u(!0),[S,k]=u(!1),[P,R]=u(!1);J(()=>document.title="Edit Pasien"),U(()=>{const e=new AbortController;return N.get("patient/"+g.id,{signal:e.signal}).then(t=>{const a=t.data.data;$(a),h("")}).catch(t=>{var a,s;h(((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||"Gagal memuat data pasien")}).finally(()=>M(!1)),()=>e.abort()});const d=(e,t)=>{$(a=>({...a,[e]:t})),w(a=>({...a,[e]:""}))},j=()=>{const e={},t=i();return t.name.trim()||(e.name="Nama pasien wajib diisi"),t.dob||(e.dob="Tanggal lahir wajib diisi"),t.telp.match(/^[0-9]{10,13}$/)||(e.telp="Nomor telepon tidak valid"),w(e),Object.keys(e).length===0},A=async e=>{var t,a;if(e.preventDefault(),!!j()){k(!0);try{await N.put(`patient/${g.id}`,i()),R(!0),setTimeout(()=>y(`/pasien/${g.id}`),2e3)}catch(s){console.error("Update error:",s),h(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Gagal memperbarui data pasien")}finally{k(!1)}}};return(()=>{var e=ae(),t=e.firstChild,a=t.firstChild;return l(t,n(z,{}),a),l(a,n(x,{get when(){return!L()},get fallback(){return re()},get children(){return n(x,{get when(){return!_()},get fallback(){return(()=>{var s=le();return l(s,_),s})()},get children(){var s=ee(),E=s.firstChild,D=E.firstChild,C=D.nextSibling;C.firstChild;var o=E.nextSibling,p=o.firstChild,T=p.firstChild,q=T.nextSibling,f=p.nextSibling,v=f.firstChild,B=v.nextSibling;return l(C,()=>i().numberRM,null),o.addEventListener("submit",A),l(o,n(b,{label:"Nama Pasien",id:"name",get value(){return i().name},get error(){return c().name},onInput:r=>d("name",r.target.value),required:!0}),p),l(o,n(b,{label:"Tanggal Lahir",id:"dob",type:"date",get value(){return i().dob},get error(){return c().dob},onInput:r=>d("dob",r.target.value),required:!0}),p),l(q,n(H,{each:Z,children:r=>n(Y,{get label(){return r.label},get value(){return r.value},get checked(){return i().gender===r.value},onChange:()=>d("gender",r.value)})})),l(o,n(b,{label:"Nama Orang Tua",id:"parent",get value(){return i().parent},get error(){return c().parent},onInput:r=>d("parent",r.target.value)}),f),l(o,n(b,{label:"Nomor Telepon",id:"telp",type:"tel",get value(){return i().telp},get error(){return c().telp},onInput:r=>d("telp",r.target.value),placeholder:"081234567890"}),f),l(o,n(b,{label:"Alamat Rumah",id:"address",type:"textarea",get value(){return i().address},get error(){return c().address},onInput:r=>d("address",r.target.value),rows:"4"}),f),l(v,()=>S()?"Menyimpan...":"Simpan Perubahan"),B.$$click=()=>y(`/pasien/${g.id}`),F(()=>v.disabled=S()),s}})}}),null),l(a,n(x,{get when(){return P()},get children(){return te()}}),null),l(e,n(Q,{}),null),F(()=>V(e,`flex flex-col ${I.bg}`)),e})()}X(["click"]);export{oe as default};
