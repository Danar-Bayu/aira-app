import{y as Oe,q as Fe,u as Ke,n as ze,c as v,o as Be,j as Ye,p as L,t as a,i as e,d as o,N as qe,S as G,m as ne,f,F as He,g as Me,h as Ve,e as $e,v as Ue,s as ve,k as Xe}from"./index-MOF6v1YI.js";import{I as Ge,f as Je}from"./index-DFNEfQqd.js";const Qe=(k,F)=>{let M;const b=()=>clearTimeout(M);return Oe()&&Fe(b),Object.assign((...p)=>{M!==void 0&&b(),M=setTimeout(()=>k(...p),F)},{clear:b})};function We(k){return Ge({a:{viewBox:"0 0 1024 1024"},c:'<path d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"/><path d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/>'},k)}var Ze=a('<div class="min-h-[10cm] mb-1">'),et=a("<div class=ml-3>PCC, "),tt=a('<div class="w-full h-full bg-white rounded-lg px-1"><h3 class="text-center font-bold uppercase"></h3><p class=text-sm></p><p class=text-sm>SIA </p><p class=text-sm>Telp </p><p class=text-sm>Apoteker </p><p class=text-sm>SIPA </p><hr class=my-2><h3 class="text-center font-semibold">SALINAN RESEP</h3><table class="w-full my-2"><tbody><tr><td class="text-sm px-2 w-1/3">Dokter</td><td class=text-sm>: </td></tr><tr><td class="text-sm px-2">Tanggal Resep</td><td class=text-sm>: </td></tr><tr><td class="text-sm px-2">Pasien</td><td class=text-sm>: </td></tr></tbody></table><div class=mt-2>'),lt=a("<div class=h-[10cm]>"),rt=a('<div class="space-y-1 mt-2"><div></div><div></div><div>'),nt=a('<div class="flex gap-2"><div></div><div class=flex-grow><ul class=space-y-1>'),st=a('<div class="flex items-center gap-3 mt-2"><hr class="flex-grow border-t "><div>'),Re=a("<li>"),at=a("<div class=mt-2>"),it=a("<div>Iter <!>X"),ot=a("<div class=ml-3>PCC, ......"),dt=a('<div><div class=" print:hidden"><div><main class="flex-grow p-4 "><div class="inline-flex items-center mx-5 mb-4 p-3 border border-gray-300 rounded-lg bg-white shadow-sm"><label class="flex items-center cursor-pointer"><input type=checkbox class="peer h-5 w-5 cursor-pointer appearance-none rounded border border-gray-400 checked:bg-blue-600 checked:border-blue-600 transition-colors"><span class="absolute text-white opacity-0 peer-checked:opacity-100"><svg class="w-3.5 h-3.5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M5 13L9 17L19 7"stroke-linecap=round stroke-linejoin=round></path></svg></span><span class="ml-2 text-sm text-gray-700">Resep Kosong</span></label></div><div class="flex flex-col lg:flex-row gap-4 mx-5"><div class="w-full bg-white rounded-lg p-5 shadow-md"><h2 class="text-lg font-semibold mb-2 text-gray-800">Form Resep</h2><div class="grid grid-cols-1 gap-2"><div class="flex flex-col md:flex-row gap-2 md:items-center"><label class="w-30 text-sm font-medium text-gray-700 mb-1">Nama Pasien</label><input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"placeholder="Nama Pasien"></div><div class="flex flex-col md:flex-row gap-2 md:items-center"><label class="w-30 text-sm font-medium text-gray-700 mb-1">Tanggal Resep</label><input type=date class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"></div><div class="flex flex-col md:flex-row gap-2 md:items-center"><label class="w-30 text-sm font-medium text-gray-700 mb-1">Nama Dokter</label><input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"placeholder="Nama Dokter"></div><div class="flex flex-col md:flex-row gap-2 md:items-center"><label class="w-30 text-sm font-medium text-gray-700 mb-1">Tgl salinan resep</label><input type=date class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"></div></div><div class=mt-8><button class="w-full md:w-auto px-6 py-2 bg-blue-600 hover:bg-blue-700 border text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] rounded-md font-medium transition-colors mt-4">Tambah Resep</button></div></div><div class="w-full flex flex-col gap-4"><div class="bg-gray-100 rounded-lg p-4 flex justify-center"><button class="px-6 py-2 bg-blue-600 inset-shadow-sm hover:bg-blue-700 border text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] rounded-md font-medium transition-colors">Cetak Resep</button></div><div class="bg-gray-100 rounded-lg p-4 flex-grow flex justify-center"><div class="w-full max-w-[11cm] bg-white p-2 shadow-inner"></div></div></div></div></main></div></div><div class="hidden print:block w-[11cm]">'),ct=a('<div class="flex gap-2 mb-4"><button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 border text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] rounded-md font-medium transition-colors">ADD'),ut=a('<div class="space-y-2 mb-4"><input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">'),gt=a('<input type=number class="w-16 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">'),pt=a('<div class="bg-gray-50 rounded-lg mb-4 p-4 border border-gray-200"><div class="flex justify-between items-center mb-4"><div class="flex items-center gap-2"></div><button class="flex items-center gap-1 text-red-600 hover:text-red-800 transition-colors"><span class="text-sm font-medium">Hapus</span></button></div><ul class="space-y-2 mb-4"></ul><div class="flex items-center gap-3 mb-4"></div><div class="flex items-center gap-2"><span class=text-gray-700>DET</span><input type=text class="flex-grow px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">'),bt=a('<li class="flex gap-2"><input type=text class="flex-grow px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><button class="px-3 py-2 bg-red-600 hover:bg-red-700 border text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] rounded-md transition-colors">Hapus'),ft=a('<input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-4">'),mt=a('<div class="flex items-center"><input type=checkbox class="peer h-5 w-5 cursor-pointer transition-all appearance-none rounded shadow-sm hover:shadow border border-stone-200 checked:bg-blue-500 checked:border-blue-500"><span class="absolute text-white opacity-0 peer-checked:opacity-100"><svg class="w-3.5 h-3.5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M5 13L9 17L19 7"stroke-linecap=round stroke-linejoin=round></path></svg></span><label class="ml-2 text-sm text-gray-700 cursor-pointer">'),xt=a('<div class="relative w-full"><input type=text placeholder="Ketikan Nama Obat..."class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">'),_t=a('<ul class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto">');function wt(){const[k,F]=Ke(Ve),b=ze().state||{},[S,p]=v(""),[T,R]=v(""),[j,P]=v(""),[J,K]=v(""),[I,se]=v({}),[Q,n]=v([]),[d,W]=v([]),[A,ae]=v(!1);Be(()=>{document.title="Copy Resep",Ye.get("profile").then(l=>se(l.data.data)).catch(l=>console.error("Failed to fetch profile:",l)),Ye.get("drugs").then(l=>W(l.data.data)).catch(l=>console.error("Failed to fetch drugs:",l)),R(b.pasienName||""),p(b.doktorName||""),P(b.createdOn?L(b.createdOn).format("YYYY-MM-DD"):L().format("YYYY-MM-DD")),K(L().format("YYYY-MM-DD"))});const ue=()=>{n(l=>[...l,{iter:!1,jumlahIter:1,racikan:!1,sirplus:"add sirplus qs",jumlahRacikan:"mf pulv dtd 15",drugs:[],signa:"2 x Sehari 1 pulv",deteur:"det"}])},z=l=>{n(s=>s.filter((g,r)=>r!==l))},we=(l,s)=>{console.log(`index ${l} dan key ${s}`),n(g=>g.map((r,c)=>c===l?{...r,[s]:!r[s]}:r))},B=(l,s,g)=>{n(r=>r.map((c,h)=>h===l?{...c,[s]:g}:c))},ye=(l,s)=>{s.trim()&&n(g=>g.map((r,c)=>{if(c===l){const h=[...r.drugs,s];let m=r.signa;if(!r.racikan){const Y=d().find(q=>q.name===s);m=(Y==null?void 0:Y.signa)||r.signa}return{...r,drugs:h,signa:m}}return r}))},Ie=(l,s)=>{n(g=>g.map((r,c)=>c===l?{...r,drugs:r.drugs.filter((h,m)=>m!==s)}:r))},Le=(l,s,g)=>{n(r=>r.map((c,h)=>h===l?{...c,drugs:c.drugs.map((m,Y)=>Y===s?g:m)}:c))},Te=()=>{window.print()},je=l=>{ae(l),l?(P(""),K("")):(P(b.createdOn?L(b.createdOn).format("YYYY-MM-DD"):L().format("YYYY-MM-DD")),K(L().format("YYYY-MM-DD")))},ke=()=>(()=>{var l=tt(),s=l.firstChild,g=s.nextSibling,r=g.nextSibling;r.firstChild;var c=r.nextSibling;c.firstChild;var h=c.nextSibling;h.firstChild;var m=h.nextSibling;m.firstChild;var Y=m.nextSibling,q=Y.nextSibling,ie=q.nextSibling,oe=ie.firstChild,Z=oe.firstChild,ge=Z.firstChild,ee=ge.nextSibling;ee.firstChild;var te=Z.nextSibling,pe=te.firstChild,H=pe.nextSibling;H.firstChild;var de=te.nextSibling,be=de.firstChild,le=be.nextSibling;le.firstChild;var fe=ie.nextSibling;return e(s,()=>I().name),e(g,()=>I().address),e(r,()=>I().sia,null),e(c,()=>I().telp,null),e(h,()=>I().apoteker,null),e(m,()=>I().sipa,null),e(ee,S,null),e(H,(()=>{var C=$e(()=>!!j());return()=>C()?L(j(),"YYYY-MM-DD").format("DD MMMM YYYY"):""})(),null),e(le,T,null),e(fe,o(G,{get when(){return Q().length>0},get fallback(){return lt()},get children(){var C=Ze();return e(C,o(ne,{get each(){return Q()},children:(x,me)=>[(()=>{var D=nt(),V=D.firstChild,E=V.nextSibling,xe=E.firstChild;return e(V,o(Je,{})),e(xe,o(ne,{get each(){return x.drugs},children:w=>(()=>{var y=Re();return e(y,w),y})()})),e(E,o(G,{get when(){return x.racikan},get fallback(){return(()=>{var w=at();return e(w,()=>x.signa),w})()},get children(){var w=rt(),y=w.firstChild,U=y.nextSibling,t=U.nextSibling;return e(y,()=>x.sirplus),e(U,()=>x.jumlahRacikan),e(t,()=>x.signa),w}}),null),e(D,(()=>{var w=$e(()=>!!x.iter);return()=>w()&&(()=>{var y=it(),U=y.firstChild,t=U.nextSibling;return t.nextSibling,e(y,()=>x.jumlahIter,t),y})()})(),null),D})(),(()=>{var D=st(),V=D.firstChild,E=V.nextSibling;return e(E,()=>x.deteur),D})()]})),C}})),e(l,o(G,{get when(){return!A()},get fallback(){return ot()},get children(){var C=et();return C.firstChild,e(C,()=>L(J(),"YYYY-MM-DD").format("DD MMMM YYYY"),null),C}}),null),l})();return(()=>{var l=dt(),s=l.firstChild,g=s.firstChild,r=g.firstChild,c=r.firstChild,h=c.firstChild,m=h.firstChild,Y=c.nextSibling,q=Y.firstChild,ie=q.firstChild,oe=ie.nextSibling,Z=oe.firstChild,ge=Z.firstChild,ee=ge.nextSibling,te=Z.nextSibling,pe=te.firstChild,H=pe.nextSibling,de=te.nextSibling,be=de.firstChild,le=be.nextSibling,fe=de.nextSibling,C=fe.firstChild,x=C.nextSibling,me=oe.nextSibling,D=me.firstChild,V=q.nextSibling,E=V.firstChild,xe=E.firstChild,w=E.nextSibling,y=w.firstChild,U=s.nextSibling;return e(g,o(qe,{}),r),m.addEventListener("change",t=>je(t.currentTarget.checked)),ee.$$input=t=>R(t.currentTarget.value),H.addEventListener("change",t=>P(t.currentTarget.value)),le.$$input=t=>p(t.currentTarget.value),x.addEventListener("change",t=>K(t.currentTarget.value)),e(me,o(ne,{get each(){return Q()},children:(t,i)=>(()=>{var N=pt(),re=N.firstChild,Ce=re.firstChild,_e=Ce.nextSibling,Pe=_e.firstChild,he=re.nextSibling,ce=he.nextSibling,Ae=ce.nextSibling,Ee=Ae.firstChild,Se=Ee.nextSibling;return e(Ce,o(De,{get id(){return`racikan-checkbox-${i()}`},label:"Racikan",get checked(){return t.racikan},onChange:()=>we(i(),"racikan")})),_e.$$click=()=>z(i()),e(_e,o(We,{}),Pe),e(N,o(G,{get when(){return t.racikan||!t.racikan&&t.drugs.length===0},get children(){var u=ct(),_=u.firstChild;return e(u,o(ht,{get id(){return`drug-input-${i()}`},get options(){return d()},onSelect:$=>ye(i(),$)}),_),_.$$click=()=>{const $=document.getElementById(`drug-input-${i()}`);console.log($.value),ye(i(),$.value),$.value=""},u}}),he),e(he,o(ne,{get each(){return t.drugs},children:(u,_)=>(()=>{var $=bt(),X=$.firstChild,O=X.nextSibling;return X.$$input=Ne=>Le(i(),_(),Ne.target.value),X.value=u,O.$$click=()=>Ie(i(),_()),$})()})),e(N,o(G,{get when(){return t.racikan},get fallback(){return(()=>{var u=ft();return u.$$input=_=>B(i,"signa",_.target.value),f(()=>u.value=t.signa),u})()},get children(){var u=ut(),_=u.firstChild,$=_.nextSibling,X=$.nextSibling;return _.$$input=O=>B(i,"sirplus",O.target.value),$.$$input=O=>B(i,"jumlahRacikan",O.target.value),X.$$input=O=>B(i,"signa",O.target.value),f(()=>_.value=t.sirplus),f(()=>$.value=t.jumlahRacikan),f(()=>X.value=t.signa),u}}),ce),e(ce,o(De,{id:`iter-checkbox-${i}`,label:"Iter",get checked(){return t.iter},onChange:()=>we(i,"iter")}),null),e(ce,o(G,{get when(){return t.iter},get children(){var u=gt();return u.$$input=_=>B(i,"jumlahIter",_.target.value),f(()=>u.value=t.jumlahIter),u}}),null),Se.$$input=u=>B(i,"deteur",u.target.value),f(()=>Se.value=t.deteur),N})()}),D),D.$$click=ue,xe.$$click=Te,e(y,o(ke,{})),e(s,o(He,{}),null),e(U,o(ke,{})),f(t=>{var i=`min-h-screen flex flex-col ${k.bg}`,N=A(),re=A();return i!==t.e&&Me(g,t.e=i),N!==t.t&&(H.disabled=t.t=N),re!==t.a&&(x.disabled=t.a=re),t},{e:void 0,t:void 0,a:void 0}),f(()=>m.checked=A()),f(()=>ee.value=T()),f(()=>H.value=j()),f(()=>le.value=S()),f(()=>x.value=J()),l})()}function De({id:k,label:F,checked:M,onChange:b}){return(()=>{var S=mt(),p=S.firstChild,T=p.nextSibling,R=T.nextSibling;return Ue(p,"change",b),ve(p,"id",k),p.checked=M,ve(R,"for",k),e(R,F),S})()}function ht({id:k,options:F,onSelect:M}){const[b,S]=v(""),[p,T]=v([]),[R,j]=v(!1),[P,J]=v(0),K=Qe(({value:n})=>{if(n.length>0){const d=F.filter(W=>W.name.toLowerCase().includes(n.toLowerCase()));T(d),j(!0)}else T([]),j(!1)},300),I=n=>{const d=n.target.value;S(d),K({value:d})},se=n=>{S(n.name),j(!1),M(n.name)},Q=n=>{n.key==="ArrowDown"?(n.preventDefault(),J(d=>d<p().length-1?d+1:d)):n.key==="ArrowUp"?(n.preventDefault(),J(d=>d>0?d-1:0)):n.key==="Enter"&&R()&&(n.preventDefault(),p().length>0&&se(p()[P()]))};return(()=>{var n=xt(),d=n.firstChild;return d.$$keydown=Q,d.$$input=I,ve(d,"id",k),e(n,(()=>{var W=$e(()=>!!(R()&&p().length>0));return()=>W()&&(()=>{var A=_t();return e(A,o(ne,{get each(){return p()},children:(ae,ue)=>(()=>{var z=Re();return z.$$click=()=>se(ae),e(z,()=>ae.name),f(()=>Me(z,`px-3 py-2 cursor-pointer hover:bg-gray-100 ${ue()===P()?"bg-gray-100":""}`)),z})()})),A})()})(),null),f(()=>d.value=b()),n})()}Xe(["input","click","keydown"]);export{wt as default};
