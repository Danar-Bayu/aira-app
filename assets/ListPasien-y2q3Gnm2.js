import{d as a,S as m,t as g,i as t,k as A,u as oe,h as ge,a as ue,c as n,o as xe,j,N as he,m as V,f as C,F as be,g as K,s as fe}from"./index-D3-MfCrU.js";import{L as me}from"./LoadingSpinner-CP9NrSRA.js";const pe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20fill='%23FFFFFF'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='800px'%20height='800px'%20viewBox='0%200%2045.532%2045.532'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M22.766,0.001C10.194,0.001,0,10.193,0,22.766s10.193,22.765,22.766,22.765c12.574,0,22.766-10.192,22.766-22.765%20S35.34,0.001,22.766,0.001z%20M22.766,6.808c4.16,0,7.531,3.372,7.531,7.53c0,4.159-3.371,7.53-7.531,7.53%20c-4.158,0-7.529-3.371-7.529-7.53C15.237,10.18,18.608,6.808,22.766,6.808z%20M22.761,39.579c-4.149,0-7.949-1.511-10.88-4.012%20c-0.714-0.609-1.126-1.502-1.126-2.439c0-4.217,3.413-7.592,7.631-7.592h8.762c4.219,0,7.619,3.375,7.619,7.592%20c0,0.938-0.41,1.829-1.125,2.438C30.712,38.068,26.911,39.579,22.761,39.579z'/%3e%3c/g%3e%3c/svg%3e";var $e=g('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg p-6 max-w-sm w-full animate-fade-in"><div class=text-center><div class="text-green-500 text-4xl mb-4">âœ“</div><h3 class="text-lg font-semibold mb-2"></h3><p class="text-gray-600 mb-4"></p><button class="px-4 py-2 bg-blue-600 text-white border [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] rounded-md hover:bg-blue-700">Tutup');function _e(e){return a(m,{get when(){return e.show},get children(){var i=$e(),c=i.firstChild,u=c.firstChild,h=u.firstChild,r=h.nextSibling,d=r.nextSibling,o=d.nextSibling;return t(r,()=>e.title),t(d,()=>e.message),o.$$click=()=>{var b;return(b=e.onClose)==null?void 0:b.call(e)},i}})}A(["click"]);var ve=g('<div class="text-center p-4 text-gray-600 text-xl">'),we=g('<div class="bg-white rounded-lg shadow overflow-auto"><table class="w-full oveflow"><thead class=bg-gray-200><tr><th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">RM</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Nama</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-700 hidden md:table-cell">Orang Tua</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Alamat</th></tr></thead><tbody>'),ye=g('<p class="text-sm text-red-600">'),Se=g('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"><div class="bg-white rounded-lg p-6 max-w-md w-full"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-semibold">Konfirmasi Pendaftaran</h2><button class="brder text-gray-500 border hover:text-gray-700">&times;</button></div><div class=space-y-4><div class=space-y-2><label class="block text-sm font-medium text-gray-700">Pilih Dokter<span class="text-red-500 ml-1">*</span></label><select class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500"><option value>-- Pilih Dokter --</option></select></div><div class="flex justify-end gap-2"><button class="border px-4 py-2 bg-red-200 rounded-md hover:bg-red-300">Batal</button><button class="border text-white px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700">Daftarkan'),ke=g('<div><div class="min-h-screen flex flex-col"><main class="flex-grow container mx-auto px-4 py-8"><div class="max-w-3xl mx-auto"><div class=space-y-6><div class=space-y-2><h1 class="text-2xl font-bold text-gray-800">Cari Pasien</h1><div class="flex gap-2"><input type=text placeholder="Nama pasien atau orang tua"class="flex-grow p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><button class="px-4 py-2 bg-blue-600 text-white border rounded-md hover:bg-blue-700 transition-colors">Cari'),Ce=g("<option class=text-sm> - "),De=g('<tr><td class="px-4 py-2"></td><td class="px-4 py-2 md:hidden"><div class=space-y-1><div class=font-medium></div><div class="text-sm text-gray-500"></div></div></td><td class="px-4 py-2 hidden md:table-cell"></td><td class="px-4 py-2 hidden md:table-cell"></td><td class="px-4 py-2 text-sm">'),Pe=g('<tr class=bg-blue-300><td class="bg-red-200 hidden mb:table-cell">a</td><td colspan=4 class="px-4 py-2"><div class="flex flex-wrap gap-2 justify-start md:justify-end"><button class="px-3 py-1.5 text-white bg-blue-600 border rounded rounded-md text-sm hover:bg-blue-700">Daftarkan ke Dokter</button><button class="px-3 py-1.5 text-white bg-gray-600 border rounded text-sm hover:bg-gray-700 flex items-center"><img class="w-4 h-4 mr-2"alt=Detail>Detail');function Te(){const[e,i]=oe(ge),c=ue(),[u,h]=n(""),[r,d]=n(""),[o,b]=n(""),[D,U]=n([]),[$,W]=n(""),[L,N]=n([]),[E,P]=n("Silakan cari nama pasien atau Orang Tua"),[G,Y]=n({}),[q,_]=n(!1),[H,z]=n(!1),[J,Q]=n(!1);xe(()=>{document.title="List Pasien",X()});const X=()=>{j.get("doctors").then(l=>U(l.data.data)).catch(console.error)},Z=()=>{const l={};return o()||(l.doctor="Silakan pilih dokter"),r()||(l.patient="Silakan pilih pasien"),Y(l),Object.keys(l).length===0},B=async()=>{if($()){z(!0);try{const l=await j.get("patient/search",{params:{name:$()}});l.data.data.length===0?(P(`Nama "${$()}" tidak ditemukan`),N([])):(N(l.data.data),P(""))}catch(l){console.error("Search error:",l),P("Terjadi kesalahan saat mencari pasien")}finally{z(!1)}}},ee=async()=>{if(Z())try{await j.post("mr/register",{doctorId:o(),patientId:r()}),Q(!0),setTimeout(()=>c("/register",{replace:!0}),3e3),_(!1)}catch(l){console.error("Registration error:",l),alert("Gagal melakukan pendaftaran")}};return(()=>{var l=ke(),I=l.firstChild,v=I.firstChild,te=v.firstChild,w=te.firstChild,le=w.firstChild,ae=le.firstChild,se=ae.nextSibling,y=se.firstChild,ie=y.nextSibling;return t(I,a(he,{}),v),y.$$keydown=s=>s.key==="Enter"&&B(),y.$$input=s=>W(s.currentTarget.value),ie.$$click=B,t(w,a(m,{get when(){return E()},get children(){var s=ve();return t(s,E),s}}),null),t(w,a(me,{get show(){return H()}}),null),t(w,a(m,{get when(){return L().length>0},get children(){var s=we(),R=s.firstChild,S=R.firstChild,M=S.nextSibling;return t(M,a(V,{get each(){return L()},children:k=>a(Re,{pasien:k,get selected(){return u()===k.numberRM},onSelect:f=>h(f),onDetail:f=>c(`/pasien/${f}`),onRegister:f=>{d(f),_(!0)}})})),s}}),null),t(v,a(m,{get when(){return q()},get children(){var s=Se(),R=s.firstChild,S=R.firstChild,M=S.firstChild,k=M.nextSibling,f=S.nextSibling,F=f.firstChild,re=F.firstChild,T=re.nextSibling;T.firstChild;var ne=F.nextSibling,O=ne.firstChild,ce=O.nextSibling;return k.$$click=()=>_(!1),T.addEventListener("change",x=>b(x.target.value)),t(T,a(V,{get each(){return D()},children:x=>(()=>{var p=Ce(),de=p.firstChild;return t(p,()=>x.name,de),t(p,()=>x.specialtyName,null),C(()=>p.value=x.id),p})()}),null),t(F,a(m,{get when(){return G().doctor},get children(){var x=ye();return t(x,()=>G().doctor),x}}),null),O.$$click=()=>_(!1),ce.$$click=ee,s}}),null),t(v,a(_e,{get show(){return J()},title:"Pendaftaran Berhasil!",message:"Pasien berhasil didaftarkan"}),null),t(l,a(be,{}),null),C(()=>K(l,`flex flex-col ${e.bg}`)),C(()=>y.value=$()),l})()}const Re=e=>[(()=>{var i=De(),c=i.firstChild,u=c.nextSibling,h=u.firstChild,r=h.firstChild,d=r.nextSibling,o=u.nextSibling,b=o.nextSibling,D=b.nextSibling;return i.$$click=()=>{e.onSelect(e.pasien.numberRM)},t(c,()=>e.pasien.numberRM),t(r,()=>e.pasien.name),t(d,()=>e.pasien.parent),t(o,()=>e.pasien.name),t(b,()=>e.pasien.parent),t(D,()=>e.pasien.address),C(()=>K(i,`cursor-pointer ${e.selected?"bg-blue-300":"hover:bg-gray-200"}`)),i})(),a(m,{get when(){return e.selected},get children(){var i=Pe(),c=i.firstChild,u=c.nextSibling,h=u.firstChild,r=h.firstChild,d=r.nextSibling,o=d.firstChild;return r.$$click=()=>e.onRegister(e.pasien.uuid),d.$$click=()=>e.onDetail(e.pasien.uuid),fe(o,"src",pe),i}})];A(["input","keydown","click"]);export{Te as default};
