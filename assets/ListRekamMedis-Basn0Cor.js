import{u as Te,c as g,a as Fe,o as Ne,p as v,q as Ee,j as ie,t as s,i as e,d as r,N as Le,S as x,e as se,m as je,f as w,g as ne,A as Ie,F as Oe,h as Pe,k as Ae}from"./index-QDpuPou6.js";import{L as de}from"./LoadingSpinner-BvU6h-za.js";import{b as He,c as Be,d as Ge,e as Ke}from"./index-rrxoYm3J.js";var O=s('<p class="text-red-500 text-xs mt-1">'),Ue=s('<div class="flex justify-center py-12">'),qe=s('<div><div class="flex flex-col min-h-screen "><main class="flex-grow container mx-auto px-4 py-6"><div class="bg-white rounded-lg shadow-md p-6"><div class=mb-6><h1 class="text-2xl font-bold text-gray-800 mb-4">Daftar Rekam Medis</h1><div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end"><div><label class="block text-sm font-medium text-gray-700 mb-1">Tanggal Mulai</label><input type=date class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></div><div><label class="block text-sm font-medium text-gray-700 mb-1">Tanggal Akhir</label><input type=date class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></div><div class=md:col-span-2><button class="w-full md:w-auto px-4 py-2 bg-blue-600 border text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">Cari Rekam Medis</button></div></div></div><hr class="my-4 border-gray-200">'),ze=s('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z">'),Je=s('<div class=overflow-x-auto><table class="min-w-full divide-y divide-gray-200"><thead class=bg-gray-200><tr><th class="md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pasien</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Dokter</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Biaya</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Keterangan</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">'),Qe=s('<div class="text-center py-8 bg-gray-50 rounded-lg"><p class=text-gray-600>'),Ve=s('<span class="font-sans antialiased text-sm text-red-500 mt-1 block">copied'),We=s(`<tr><td class="md:px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"></div><div class="text-gray-500 font-bold">'<!>'</div></td><td class="px-6 py-4"><div class=md:hidden><div class="text-sm font-medium text-gray-900"></div><div class="text-xs text-gray-500"></div><div class="text-xs text-gray-500"></div></div><div class="hidden md:block"><div class="text-sm font-medium text-gray-900"></div><div class="flex items-center"><div class="text-xs text-gray-500"></div><button class="border ml-2 px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors">Salin</button></div></div></td><td class="px-6 py-4 whitespace-nowrap text-sm hidden md:table-cell"></td><td class="px-6 py-4 whitespace-nowrap text-sm hidden md:table-cell"></td><td class="px-6 py-4 whitespace-nowrap"><label class="inline-flex items-center cursor-pointer"><input type=checkbox class="sr-only peer"><div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div></label><div class="md:hidden text-xs mt-1"></div></td><td class="px-6 py-4 text-sm hidden md:table-cell">`),Xe=s('<tr class=bg-blue-200><td colspan=6 class="px-6 py-4"><div class="flex flex-wrap gap-2"><button class="border px-3 py-1 md:py-1.5 bg-blue-600 rounded-md text-sm text-white hover:bg-blue-700 transition-colors flex items-center">Profil Pasien</button><button class="border hidden md:inline-flex px-3 py-1 md:py-1.5 bg-purple-600 rounded-md text-sm text-white hover:bg-purple-700 transition-colors flex items-center">Kwitansi</button><button class="border hidden md:inline-flex px-3 py-1 md:py-1.5 bg-green-600 rounded-md text-sm text-white hover:bg-green-700 transition-colors flex items-center">Resep'),Ze=s('<span class="ms-3 text-sm font-medium text-red-700">Debit'),et=s('<span class="ms-3 text-sm font-medium text-green-700">Cash');function it(){const[oe,tt]=Te(Pe),[$,P]=g(""),[y,A]=g(""),[H,ce]=g(""),[B,G]=g([]),[k,K]=g(!1),[ge,U]=g("Silakan pilih rentang tanggal"),[b,me]=g({}),[ue,q]=g(""),N=Fe();Ne(()=>{document.title="Rekam Medis";const a=v().format("YYYY-MM-DD");A(a),P(a),z(a,a)});let S;Ee(()=>{S&&S.abort()});const z=(a,d)=>{K(!0),S=new AbortController;const n=v(a,"YYYY-MM-DD").startOf("day").format("YYYY-MM-DDTHH:mm:ss.SSS"),o=v(d,"YYYY-MM-DD").endOf("day").format("YYYY-MM-DDTHH:mm:ss.SSS");ie.get("mr",{params:{start:n,end:o},signal:S.signal}).then(c=>{G(c.data.data),U(c.data.data.length===0?"Tidak ada data pada rentang tanggal tersebut":"")}).catch(c=>{c.name!=="AbortError"&&(U("Gagal memuat data rekam medis"),console.error("Error fetching records:",c))}).finally(()=>K(!1))},pe=()=>{const a={};return $()||(a.start="Tanggal mulai harus diisi"),y()||(a.end="Tanggal akhir harus diisi"),$()&&y()&&v(y()).isBefore($())&&(a.range="Tanggal akhir tidak boleh sebelum tanggal mulai"),me(a),Object.keys(a).length===0},xe=()=>{pe()&&z($(),y())},be=(a,d)=>{navigator.clipboard.writeText(a).then(()=>{q(d),setTimeout(()=>q(""),2e3)}).catch(n=>console.error("Gagal menyalin:",n))},fe=async(a,d)=>{try{await ie.put(`mr/${a.id}`,{...a,isDebit:d}),G(n=>n.map(o=>o.id===a.id?{...o,isDebit:d}:o))}catch(n){alert("Gagal memperbarui status debit"),console.error("Update error:",n)}},he=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return(()=>{var a=qe(),d=a.firstChild,n=d.firstChild,o=n.firstChild,c=o.firstChild,ve=c.firstChild,$e=ve.nextSibling,E=$e.firstChild,ye=E.firstChild,J=ye.nextSibling,C=E.nextSibling,_e=C.firstChild,Q=_e.nextSibling,we=C.nextSibling,D=we.firstChild,ke=D.firstChild;return c.nextSibling,e(d,r(Le,{}),n),J.$$input=t=>P(t.currentTarget.value),e(E,r(x,{get when(){return b().start},get children(){var t=O();return e(t,()=>b().start),t}}),null),Q.$$input=t=>A(t.currentTarget.value),e(C,r(x,{get when(){return b().end},get children(){var t=O();return e(t,()=>b().end),t}}),null),e(C,r(x,{get when(){return b().range},get children(){var t=O();return e(t,()=>b().range),t}}),null),D.$$click=xe,e(D,(()=>{var t=se(()=>!!k());return()=>t()?r(de,{class:"w-5 h-5 mr-2"}):ze()})(),ke),e(o,r(x,{get when(){return k()},get fallback(){return r(x,{get when(){return B().length>0},get fallback(){return(()=>{var t=Qe(),f=t.firstChild;return e(f,()=>ge()||"Tidak ada data yang ditemukan"),t})()},get children(){var t=Je(),f=t.firstChild,M=f.firstChild,Se=M.nextSibling;return e(Se,r(je,{get each(){return B()},children:(l,L)=>[(()=>{var m=We(),Y=m.firstChild,_=Y.firstChild,u=_.nextSibling,j=u.firstChild,p=j.nextSibling;p.nextSibling;var R=Y.nextSibling,h=R.firstChild,T=h.firstChild,V=T.nextSibling,Ce=V.nextSibling,De=h.nextSibling,W=De.firstChild,X=W.nextSibling,Z=X.firstChild,Me=Z.nextSibling,ee=R.nextSibling,te=ee.nextSibling,ae=te.nextSibling,I=ae.firstChild,F=I.firstChild;F.nextSibling;var Ye=I.nextSibling,Re=ae.nextSibling;return m.$$click=()=>ce(l.id),e(_,()=>L()+1),e(u,()=>l.numberRM,p),e(T,()=>l.patientName),e(V,()=>v(l.createdOn).format("DD MMM YYYY")),e(Ce,()=>l.doctorName),e(W,()=>l.patientName),e(Z,()=>v(l.createdOn).format("DD MMM YYYY")),Me.$$click=i=>{i.stopPropagation(),be(l.patientName,L())},e(X,r(x,{get when(){return ue()===L()},get children(){return Ve()}}),null),e(ee,()=>l.doctorName),e(te,()=>he(l.fee)),F.$$input=i=>fe(l,i.currentTarget.checked),e(I,(()=>{var i=se(()=>!!l.isDebit);return()=>i()?Ze():et()})(),null),e(Ye,()=>l.comment||"---"),e(Re,()=>l.comment||"---"),w(i=>{var le=`cursor-pointer ${H()===l.id?"bg-blue-200":"hover:bg-gray-100"}`,re=k();return le!==i.e&&ne(m,i.e=le),re!==i.t&&(F.disabled=i.t=re),i},{e:void 0,t:void 0}),w(()=>F.checked=l.isDebit),m})(),r(x,{get when(){return H()===l.id},get children(){var m=Xe(),Y=m.firstChild,_=Y.firstChild,u=_.firstChild,j=u.firstChild,p=u.nextSibling,R=p.firstChild,h=p.nextSibling,T=h.firstChild;return u.$$click=()=>N(`/pasien/${l.patientId}`),e(u,r(He,{class:"mr-2"}),j),p.$$click=()=>N("/kwitansi",{state:l}),e(p,r(Be,{class:"mr-2"}),R),h.$$click=()=>N("/copy-resep",{state:l}),e(h,r(Ge,{class:"mr-2"}),T),e(_,r(Ie,{get href(){return`/mr/${l.id}`},class:"border px-3 py-1 md:py-1.5 bg-gray-600 rounded-md text-sm text-white hover:bg-gray-700 transition-colors flex items-center",get children(){return[r(Ke,{class:"mr-2"}),"Detail Rekam Medis"]}}),null),m}})]})),t}})},get children(){var t=Ue();return e(t,r(de,{class:"w-12 h-12"})),t}}),null),e(a,r(Oe,{}),null),w(t=>{var f=`flex flex-col ${oe.bg}`,M=k();return f!==t.e&&ne(a,t.e=f),M!==t.t&&(D.disabled=t.t=M),t},{e:void 0,t:void 0}),w(()=>J.value=$()),w(()=>Q.value=y()),a})()}Ae(["input","click"]);export{it as default};
