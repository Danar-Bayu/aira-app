import{t as m,i as r,e as D,v as L,f as h,s as b,g as M,d as o,S as I,k as T,u as Q,a as V,r as W,c as _,o as X,l as Y,j as R,N as Z,m as ee,F as te,h as ae}from"./index-BxPHzP4l.js";var re=m('<p class="text-sm text-red-600">'),le=m('<div class=space-y-2><label class="block text-sm font-medium text-gray-700">'),ne=m('<span class="text-red-500 ml-1">*'),ie=m("<textarea>"),se=m("<input>"),de=m('<label class="flex items-center space-x-2 cursor-pointer"><input type=radio class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"><span class=text-gray-700>');const k=e=>(()=>{var f=le(),v=f.firstChild;return r(v,()=>e.label,null),r(v,(()=>{var s=D(()=>!!e.required);return()=>s()&&ne()})(),null),r(f,(()=>{var s=D(()=>e.type==="textarea");return()=>s()?(()=>{var t=ie();return L(t,"input",e.onInput,!0),h(a=>{var u=e.id,x=e.rows||3,$=`block w-full rounded-md border ${e.error?"border-red-500":"border-gray-300"} shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2`,g=!!e.error,y=e.error?`${e.id}-error`:void 0;return u!==a.e&&b(t,"id",a.e=u),x!==a.t&&b(t,"rows",a.t=x),$!==a.a&&M(t,a.a=$),g!==a.o&&b(t,"aria-invalid",a.o=g),y!==a.i&&b(t,"aria-describedby",a.i=y),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),h(()=>t.value=e.value),t})():(()=>{var t=se();return L(t,"input",e.onInput,!0),h(a=>{var u=e.type||"text",x=e.id,$=e.placeholder,g=`block w-full rounded-md border ${e.error?"border-red-500":"border-gray-300"} shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-2.5`,y=!!e.error,S=e.error?`${e.id}-error`:void 0;return u!==a.e&&b(t,"type",a.e=u),x!==a.t&&b(t,"id",a.t=x),$!==a.a&&b(t,"placeholder",a.a=$),g!==a.o&&M(t,a.o=g),y!==a.i&&b(t,"aria-invalid",a.i=y),S!==a.n&&b(t,"aria-describedby",a.n=S),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),h(()=>t.value=e.value),t})()})(),null),r(f,o(I,{get when(){return e.error},get children(){var s=re();return r(s,()=>e.error),h(()=>b(s,"id",`${e.id}-error`)),s}}),null),h(()=>b(v,"for",e.id)),f})(),oe=e=>(()=>{var f=de(),v=f.firstChild,s=v.nextSibling;return L(v,"change",e.onChange),r(s,()=>e.label),h(()=>v.checked=e.checked),f})();T(["input"]);var ue=m('<div class="bg-white rounded-lg shadow-md overflow-hidden max-w-2xl mx-auto"><div class="bg-blue-600 text-white px-6 py-4"><h1 class="text-2xl font-bold">Edit Data Pasien</h1><p class="text-blue-200 mt-1">No. RM: </p></div><form class="p-6 space-y-6"><div class=space-y-2><label class="block text-sm font-medium text-gray-700">Jenis Kelamin</label><div class="flex gap-4"></div></div><div class="flex flex-wrap gap-3 pt-4 border-t border-gray-200"><button type=submit class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"></button><button type=button class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md transition-colors">Kembali'),ce=m('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"><div class="bg-white rounded-lg p-6 max-w-md w-full animate-fade-in"><div class=text-center><div class="text-green-500 text-4xl mb-4">âœ“</div><h3 class="text-lg font-semibold mb-2">Data Berhasil Diperbarui!</h3><p class=text-gray-600>Anda akan diarahkan kembali dalam 2 detik'),be=m('<div><div class="flex flex-col min-h-screen"><main class="flex-grow container mx-auto px-4 py-8">'),me=m('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500">'),ve=m('<div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6">');function he(){const[e,f]=Q(ae),v=V(),s=W(),[t,a]=_({name:"",parent:"",gender:"MALE",dob:"",telp:"",address:"",numberRM:""}),[u,x]=_({}),[$,g]=_(""),[y,S]=_(!0),[F,A]=_(!1),[q,B]=_(!1),G=[{label:"Laki-laki",value:"MALE"},{label:"Perempuan",value:"FEMALE"}];X(()=>document.title="Edit Pasien"),Y(()=>{const l=new AbortController;return R.get("patient/"+s.id,{signal:l.signal}).then(n=>{const i=n.data.data;a(i),g("")}).catch(n=>{var i,c;g(((c=(i=n.response)==null?void 0:i.data)==null?void 0:c.message)||"Gagal memuat data pasien")}).finally(()=>S(!1)),()=>l.abort()});const w=(l,n)=>{a(i=>({...i,[l]:n})),x(i=>({...i,[l]:""}))},K=()=>{const l={},n=t();return n.name.trim()||(l.name="Nama pasien wajib diisi"),n.dob||(l.dob="Tanggal lahir wajib diisi"),n.telp.match(/^[0-9]{10,13}$/)||(l.telp="Nomor telepon tidak valid"),x(l),Object.keys(l).length===0},O=async l=>{var n,i;if(l.preventDefault(),!!K()){A(!0);try{await R.put(`patient/${s.id}`,t()),B(!0),setTimeout(()=>v(`/pasien/${s.id}`),2e3)}catch(c){console.error("Update error:",c),g(((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||"Gagal memperbarui data pasien")}finally{A(!1)}}};return(()=>{var l=be(),n=l.firstChild,i=n.firstChild;return r(n,o(Z,{}),i),r(i,o(I,{get when(){return!y()},get fallback(){return me()},get children(){return o(I,{get when(){return!$()},get fallback(){return(()=>{var c=ve();return r(c,$),c})()},get children(){var c=ue(),P=c.firstChild,J=P.firstChild,j=J.nextSibling;j.firstChild;var p=P.nextSibling,C=p.firstChild,U=C.firstChild,z=U.nextSibling,E=C.nextSibling,N=E.firstChild,H=N.nextSibling;return r(j,()=>t().numberRM,null),p.addEventListener("submit",O),r(p,o(k,{label:"Nama Pasien",id:"name",get value(){return t().name},get error(){return u().name},onInput:d=>w("name",d.target.value),required:!0}),C),r(p,o(k,{label:"Tanggal Lahir",id:"dob",type:"date",get value(){return t().dob},get error(){return u().dob},onInput:d=>w("dob",d.target.value),required:!0}),C),r(z,o(ee,{each:G,children:d=>o(oe,{get label(){return d.label},get value(){return d.value},get checked(){return t().gender===d.value},onChange:()=>w("gender",d.value)})})),r(p,o(k,{label:"Nama Orang Tua",id:"parent",get value(){return t().parent},get error(){return u().parent},onInput:d=>w("parent",d.target.value)}),E),r(p,o(k,{label:"Nomor Telepon",id:"telp",type:"tel",get value(){return t().telp},get error(){return u().telp},onInput:d=>w("telp",d.target.value),placeholder:"081234567890"}),E),r(p,o(k,{label:"Alamat Rumah",id:"address",type:"textarea",get value(){return t().address},get error(){return u().address},onInput:d=>w("address",d.target.value),rows:"4"}),E),r(N,()=>F()?"Menyimpan...":"Simpan Perubahan"),H.$$click=()=>v(`/pasien/${s.id}`),h(()=>N.disabled=F()),c}})}}),null),r(i,o(I,{get when(){return q()},get children(){return ce()}}),null),r(l,o(te,{}),null),h(()=>M(l,`flex flex-col ${e.bg}`)),l})()}T(["click"]);export{he as default};
