import{u as Fe,c as x,a as Ne,o as Ee,p as f,q as Le,j as ie,t as d,i as e,d as i,N as je,S as u,e as Ie,m as Oe,f as k,g as re,A as Pe,F as Ae,h as He,k as Be}from"./index-MOF6v1YI.js";import{L as se}from"./LoadingSpinner-N_EktMNP.js";import{b as Ge,c as Ke,d as Ue,e as qe}from"./index-DFNEfQqd.js";var P=d('<p class="text-red-500 text-xs mt-1">'),ze=d('<div class="flex justify-center py-12">'),Je=d('<div><div class="flex flex-col min-h-screen "><main class="flex-grow container mx-auto px-4 py-6"><div class="bg-white rounded-lg shadow-md p-6"><div class=mb-6><h1 class="text-2xl font-bold text-gray-800 mb-4">Daftar Rekam Medis</h1><div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end"><div><label class="block text-sm font-medium text-gray-700 mb-1">Tanggal Mulai</label><input type=date class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></div><div><label class="block text-sm font-medium text-gray-700 mb-1">Tanggal Akhir</label><input type=date class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></div><div class=md:col-span-2><button class="w-full md:w-auto px-4 py-2 bg-blue-600 border text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">Cari Rekam Medis</button></div></div></div><hr class="my-4 border-gray-200">'),Qe=d('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z">'),Ve=d('<div class=overflow-x-auto><table class="min-w-full divide-y divide-gray-200"><thead class=bg-gray-200><tr><th class="md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pasien</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Dokter</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Biaya</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Keterangan</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">'),We=d('<div class="text-center py-8 bg-gray-50 rounded-lg"><p class=text-gray-600>'),Xe=d('<span class="font-sans antialiased text-sm text-red-500 mt-1 block">copied'),Ze=d(`<tr><td class="md:px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"></div><div class="text-xs text-gray-500 font-bold">'<!>'</div></td><td class="px-6 py-4"><div class=md:hidden><div class="text-sm font-medium text-gray-900"></div><div class="text-xs text-gray-500"></div><div class="text-xs text-gray-500"></div></div><div class="hidden md:block"><div class="flex items-center"><div class="text-sm font-medium text-gray-900"></div><button class="border ml-2 px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors">Salin</button></div><div class="text-xs text-gray-500"></div></div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell"></td><td class="px-6 py-4 whitespace-nowrap"><label class="inline-flex items-center cursor-pointer"><input type=checkbox class="sr-only peer"><div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div><span class="ms-3 text-sm font-medium text-gray-700"></span></label><div class="md:hidden text-xs text-gray-500 mt-1"></div></td><td class="px-6 py-4 text-sm text-gray-500 hidden md:table-cell">`),et=d('<tr class=bg-blue-200><td colspan=6 class="px-6 py-4"><div class="flex flex-wrap gap-2"><button class="border px-3 py-1 md:py-1.5 bg-blue-600 rounded-md text-sm text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] hover:bg-blue-700 transition-colors flex items-center">Profil Pasien</button><button class="border hidden md:inline-flex px-3 py-1 md:py-1.5 bg-purple-600 rounded-md text-sm text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] hover:bg-purple-700 transition-colors flex items-center">Kwitansi</button><button class="border hidden md:inline-flex px-3 py-1 md:py-1.5 bg-green-600 rounded-md text-sm text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] hover:bg-green-700 transition-colors flex items-center">Resep');function rt(){const[ne,tt]=Fe(He),[y,A]=x(""),[$,H]=x(""),[B,de]=x(""),[G,K]=x([]),[w,S]=x(!1),[oe,U]=x("Silakan pilih rentang tanggal"),[b,ce]=x({}),[xe,q]=x(""),E=Ne();Ee(()=>{document.title="Rekam Medis";const a=f().format("YYYY-MM-DD");H(a),A(a),z(a,a)});let C;Le(()=>{C&&C.abort()});const z=(a,s)=>{S(!0),C=new AbortController;const r=f(a,"YYYY-MM-DD").startOf("day").format("YYYY-MM-DDTHH:mm:ss.SSS"),o=f(s,"YYYY-MM-DD").endOf("day").format("YYYY-MM-DDTHH:mm:ss.SSS");ie.get("mr",{params:{start:r,end:o},signal:C.signal}).then(c=>{K(c.data.data),U(c.data.data.length===0?"Tidak ada data pada rentang tanggal tersebut":"")}).catch(c=>{c.name!=="AbortError"&&(U("Gagal memuat data rekam medis"),console.error("Error fetching records:",c))}).finally(()=>S(!1))},pe=()=>{const a={};return y()||(a.start="Tanggal mulai harus diisi"),$()||(a.end="Tanggal akhir harus diisi"),y()&&$()&&f($()).isBefore(y())&&(a.range="Tanggal akhir tidak boleh sebelum tanggal mulai"),ce(a),Object.keys(a).length===0},ge=()=>{pe()&&z(y(),$())},me=(a,s)=>{navigator.clipboard.writeText(a).then(()=>{q(s),setTimeout(()=>q(""),2e3)}).catch(r=>console.error("Gagal menyalin:",r))},ue=async(a,s)=>{try{S(!0),await ie.put(`mr/${a.id}`,{...a,isDebit:s}),K(r=>r.map(o=>o.id===a.id?{...o,isDebit:s}:o))}catch(r){alert("Gagal memperbarui status debit"),console.error("Update error:",r)}finally{S(!1)}},be=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return(()=>{var a=Je(),s=a.firstChild,r=s.firstChild,o=r.firstChild,c=o.firstChild,_e=c.firstChild,he=_e.nextSibling,L=he.firstChild,fe=L.firstChild,J=fe.nextSibling,D=L.nextSibling,ye=D.firstChild,Q=ye.nextSibling,$e=D.nextSibling,M=$e.firstChild,ve=M.firstChild;return c.nextSibling,e(s,i(je,{}),r),J.$$input=t=>A(t.currentTarget.value),e(L,i(u,{get when(){return b().start},get children(){var t=P();return e(t,()=>b().start),t}}),null),Q.$$input=t=>H(t.currentTarget.value),e(D,i(u,{get when(){return b().end},get children(){var t=P();return e(t,()=>b().end),t}}),null),e(D,i(u,{get when(){return b().range},get children(){var t=P();return e(t,()=>b().range),t}}),null),M.$$click=ge,e(M,(()=>{var t=Ie(()=>!!w());return()=>t()?i(se,{class:"w-5 h-5 mr-2"}):Qe()})(),ve),e(o,i(u,{get when(){return w()},get fallback(){return i(u,{get when(){return G().length>0},get fallback(){return(()=>{var t=We(),_=t.firstChild;return e(_,()=>oe()||"Tidak ada data yang ditemukan"),t})()},get children(){var t=Ve(),_=t.firstChild,Y=_.firstChild,ke=Y.nextSibling;return e(ke,i(Oe,{get each(){return G()},children:(l,j)=>[(()=>{var p=Ze(),R=p.firstChild,v=R.firstChild,g=v.nextSibling,I=g.firstChild,m=I.nextSibling;m.nextSibling;var T=R.nextSibling,h=T.firstChild,F=h.firstChild,V=F.nextSibling,we=V.nextSibling,Se=h.nextSibling,O=Se.firstChild,W=O.firstChild,Ce=W.nextSibling,De=O.nextSibling,X=T.nextSibling,Z=X.nextSibling,ee=Z.nextSibling,te=ee.firstChild,N=te.firstChild,Me=N.nextSibling,Ye=Me.nextSibling,Re=te.nextSibling,Te=ee.nextSibling;return p.$$click=()=>de(l.id),e(v,()=>j()+1),e(g,()=>l.numberRM,m),e(F,()=>l.patientName),e(V,()=>f(l.createdOn).format("DD MMM YYYY")),e(we,()=>l.doctorName),e(W,()=>l.patientName),Ce.$$click=n=>{n.stopPropagation(),me(l.patientName,j())},e(O,i(u,{get when(){return xe()===j()},get children(){return Xe()}}),null),e(De,()=>f(l.createdOn).format("DD MMM YYYY")),e(X,()=>l.doctorName),e(Z,()=>be(l.fee)),N.$$input=n=>ue(l,n.currentTarget.checked),e(Ye,()=>l.isDebit?"Debit":"Cash"),e(Re,()=>l.comment),e(Te,()=>l.comment||"-"),k(n=>{var ae=`cursor-pointer ${B()===l.id?"bg-blue-200":"hover:bg-gray-100"}`,le=w();return ae!==n.e&&re(p,n.e=ae),le!==n.t&&(N.disabled=n.t=le),n},{e:void 0,t:void 0}),k(()=>N.checked=l.isDebit),p})(),i(u,{get when(){return B()===l.id},get children(){var p=et(),R=p.firstChild,v=R.firstChild,g=v.firstChild,I=g.firstChild,m=g.nextSibling,T=m.firstChild,h=m.nextSibling,F=h.firstChild;return g.$$click=()=>E(`/pasien/${l.patientId}`),e(g,i(Ge,{class:"mr-2"}),I),m.$$click=()=>E("/kwitansi",{state:l}),e(m,i(Ke,{class:"mr-2"}),T),h.$$click=()=>E("/copy-resep",{state:l}),e(h,i(Ue,{class:"mr-2"}),F),e(v,i(Pe,{get href(){return`/mr/${l.id}`},class:"border px-3 py-1 md:py-1.5 bg-gray-600 rounded-md text-sm text-white [text-shadow:_-1px_-1px_0_black,_1px_-1px_0_black,_-1px_1px_0_black,_1px_1px_0_black] hover:bg-gray-700 transition-colors flex items-center",get children(){return[i(qe,{class:"mr-2"}),"Detail Rekam Medis"]}}),null),p}})]})),t}})},get children(){var t=ze();return e(t,i(se,{class:"w-12 h-12"})),t}}),null),e(a,i(Ae,{}),null),k(t=>{var _=`flex flex-col ${ne.bg}`,Y=w();return _!==t.e&&re(a,t.e=_),Y!==t.t&&(M.disabled=t.t=Y),t},{e:void 0,t:void 0}),k(()=>J.value=y()),k(()=>Q.value=$()),a})()}Be(["input","click"]);export{rt as default};
